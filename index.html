<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>FONDAMENTO - R√©seau Professionnel Premium</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html {
            -webkit-text-size-adjust: 100%;
            font-size: 16px;
        }
        
        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            touch-action: manipulation;
        }
        
        #root {
            min-height: 100vh;
        }

        /* Mobile optimizations */
        button, a, input, textarea, select {
            min-height: 44px;
            font-size: 16px; /* Prevent zoom on iOS */
        }

        input, textarea, select {
            -webkit-appearance: none;
            border-radius: 0;
        }

        button {
            -webkit-appearance: none;
            border: none;
            cursor: pointer;
        }

        /* Smooth transitions only on buttons */
        button {
            transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
        }
        
        /* NO transitions on inputs to avoid typing lag */
        input, textarea, select {
            transition: none !important;
        }

        /* Loading animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }

        /* Swipe animations */
        @keyframes swipeLeft {
            to { transform: translateX(-150%) rotate(-15deg); opacity: 0; }
        }

        @keyframes swipeRight {
            to { transform: translateX(150%) rotate(15deg); opacity: 0; }
        }

        .swipe-left {
            animation: swipeLeft 0.3s ease-out forwards;
        }

        .swipe-right {
            animation: swipeRight 0.3s ease-out forwards;
        }

        /* Modal backdrop */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            animation: fadeIn 0.2s ease-out;
        }

        /* Responsive grid */
        .responsive-grid {
            display: grid;
            gap: 15px;
        }

        @media (min-width: 768px) {
            .responsive-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        /* Safe area for notched devices */
        @supports (padding: max(0px)) {
            body {
                padding-left: max(0px, env(safe-area-inset-left));
                padding-right: max(0px, env(safe-area-inset-right));
            }
        }

        /* Disable pull-to-refresh on mobile */
        body {
            overscroll-behavior-y: contain;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo, useCallback } = React;

        // Utility functions
        const isMobile = () => window.innerWidth <= 768;
        const isTouchDevice = () => 'ontouchstart' in window || navigator.maxTouchPoints > 0;

        // Mock data
        const mockUser = {
            id: 1,
            prenom: "Marc",
            nom: "Dubois",
            email: "marc@email.com",
            telephone: "+33 6 12 34 56 78",
            localisation: "Paris",
            secteur: "Tech",
            experience: "8 ans",
            bio: "Entrepreneur tech depuis 8 ans, pass√© par Intel et Google. J'aime aider les autres entrepreneurs.",
            reseau: {
                secteurs: ["Tech", "Finance", "Luxe"],
                entreprises: ["Intel", "Google", "Meta", "Microsoft", "Apple"],
                competences: ["D√©veloppement", "Marketing", "Finance"]
            },
            preferences: {
                typeAide: "Les deux",
                disponibilite: "Tr√®s actif"
            },
            stats: {
                noteGlobale: 4.8,
                nbAvis: 47,
                introsReussies: 47,
                tempsReponse: "2h",
                proBono: 80,
                besoinsPostes: 8,
                propositionsRecues: 23,
                echangesReussis: 5
            },
            reseauPremium: [
                { nom: "Sophie M.", secteur: "Luxe", note: 5, contexte: "Contact LVMH", date: "2024-12" },
                { nom: "Thomas L.", secteur: "Finance", note: 5, contexte: "Intro investisseur", date: "2024-11" },
                { nom: "Julie R.", secteur: "Tech", note: 4, contexte: "Partenariat", date: "2024-10" }
            ],
            badges: ["Super Connector", "R√©ponse Rapide", "Premium"]
        };

        const mockBesoins = [
            {
                id: 1,
                demandeur: "Jean D.",
                besoin: "Je cherche un contact chez Intel pour une opportunit√© B2B dans le domaine de l'IA",
                secteur: "Tech",
                note: 4.5,
                nbIntros: 12
            },
            {
                id: 2,
                demandeur: "Sophie M.",
                besoin: "Je recherche un expert en finance pour m'aider √† structurer une lev√©e de fonds s√©rie A",
                secteur: "Finance",
                note: 4.9,
                nbIntros: 34
            },
            {
                id: 3,
                demandeur: "Thomas L.",
                besoin: "Besoin d'un contact dans l'industrie du luxe, id√©alement chez LVMH ou Kering",
                secteur: "Luxe",
                note: 4.6,
                nbIntros: 8
            }
        ];

        const mockPropositions = [
            {
                id: 1,
                nom: "Marc D.",
                titre: "Entrepreneur Tech",
                note: 4.8,
                nbIntros: 47,
                reseau: ["Intel", "Google", "Meta"],
                bio: "Entrepreneur tech depuis 8 ans, pass√© par Intel et Google. J'aime aider les autres entrepreneurs.",
                stats: { intros: 47, tempsReponse: "2h", proBono: 80 },
                badges: ["Super Connector", "R√©ponse Rapide", "Premium"],
                references: [
                    {
                        auteur: "Sophie M.",
                        note: 5,
                        texte: "Marc a tenu parole, super contact chez Google ! Intro rapide et efficace.",
                        contexte: "Contact Google",
                        date: "Il y a 2 jours"
                    },
                    {
                        auteur: "Jean L.",
                        note: 5,
                        texte: "Excellent contact, tr√®s r√©actif et professionnel.",
                        contexte: "Intro investisseur",
                        date: "Il y a 1 semaine"
                    }
                ]
            },
            {
                id: 2,
                nom: "Sophie L.",
                titre: "Consultante Finance",
                note: 4.9,
                nbIntros: 34,
                reseau: ["BNP Paribas", "Soci√©t√© G√©n√©rale", "Intel"],
                bio: "Consultante en finance d'entreprise, sp√©cialis√©e dans les lev√©es de fonds.",
                stats: { intros: 34, tempsReponse: "4h", proBono: 60 },
                badges: ["Expert Finance", "Premium"],
                references: [
                    {
                        auteur: "Thomas M.",
                        note: 5,
                        texte: "Contact de qualit√©, introduction parfaite.",
                        contexte: "Contact BNP",
                        date: "Il y a 3 jours"
                    }
                ]
            },
            {
                id: 3,
                nom: "Thomas R.",
                titre: "Directeur Commercial",
                note: 4.6,
                nbIntros: 23,
                reseau: ["Intel", "AMD", "NVIDIA"],
                bio: "15 ans dans l'industrie tech, r√©seau solide chez les grands acteurs du semi-conducteur.",
                stats: { intros: 23, tempsReponse: "6h", proBono: 50 },
                badges: ["R√©seau Tech"],
                references: [
                    {
                        auteur: "Marie D.",
                        note: 4,
                        texte: "Bon contact, introduction utile.",
                        contexte: "Contact Intel",
                        date: "Il y a 5 jours"
                    }
                ]
            }
        ];

        // Main App Component
        function FondamentoApp() {
            const [currentPage, setCurrentPage] = useState('home');
            const [user, setUser] = useState(null);
            const [besoinText, setBesoinText] = useState('');
            const [showPropositions, setShowPropositions] = useState(false);
            const [currentBesoinIndex, setCurrentBesoinIndex] = useState(0);
            const [selectedProposition, setSelectedProposition] = useState(null);
            const [showProfilModal, setShowProfilModal] = useState(false);
            const [showChat, setShowChat] = useState(false);
            const [chatMessages, setChatMessages] = useState([]);
            const [newMessage, setNewMessage] = useState('');
            const [identityRevealed, setIdentityRevealed] = useState(false);
            const [showRatingModal, setShowRatingModal] = useState(false);
            const [rating, setRating] = useState(0);
            const [ratingComment, setRatingComment] = useState('');

            // Memoize isMobile check to avoid re-renders
            const [windowWidth, setWindowWidth] = useState(window.innerWidth);
            
            useEffect(() => {
                const handleResize = () => setWindowWidth(window.innerWidth);
                window.addEventListener('resize', handleResize);
                return () => window.removeEventListener('resize', handleResize);
            }, []);
            
            const isMobileView = windowWidth <= 768;

            // Touch swipe handling
            const [touchStart, setTouchStart] = useState(null);
            const [touchEnd, setTouchEnd] = useState(null);
            const [isSwipping, setIsSwipping] = useState(false);

            const minSwipeDistance = 50;

            const onTouchStart = (e) => {
                setTouchEnd(null);
                setTouchStart(e.targetTouches[0].clientX);
            };

            const onTouchMove = (e) => {
                setTouchEnd(e.targetTouches[0].clientX);
            };

            const onTouchEnd = () => {
                if (!touchStart || !touchEnd) return;
                const distance = touchStart - touchEnd;
                const isLeftSwipe = distance > minSwipeDistance;
                const isRightSwipe = distance < -minSwipeDistance;
                
                if (isLeftSwipe || isRightSwipe) {
                    return isLeftSwipe ? 'left' : 'right';
                }
                return null;
            };

            // Responsive button style
            const getButtonStyle = (variant = 'primary') => ({
                width: '100%',
                padding: isMobileView ? '16px 20px' : '18px 24px',
                background: variant === 'primary' 
                    ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
                    : variant === 'success'
                    ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)'
                    : 'white',
                color: variant === 'outline' ? '#667eea' : 'white',
                border: variant === 'outline' ? '2px solid #667eea' : 'none',
                borderRadius: '15px',
                fontSize: isMobileView ? '16px' : '18px',
                fontWeight: '600',
                cursor: 'pointer',
                minHeight: '48px',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                gap: '8px',
                touchAction: 'manipulation'
            });

            const getCardStyle = () => ({
                background: 'rgba(255, 255, 255, 0.95)',
                borderRadius: isMobileView ? '20px' : '30px',
                padding: isMobileView ? '24px 20px' : '40px',
                maxWidth: '600px',
                width: '100%',
                boxShadow: '0 20px 60px rgba(0,0,0,0.3)'
            });

            // Page: Home
            const HomePage = () => (
                <div style={{
                    minHeight: '100vh',
                    display: 'flex',
                    flexDirection: 'column',
                    alignItems: 'center',
                    justifyContent: 'center',
                    padding: isMobileView ? '20px' : '40px'
                }} className="fade-in">
                    <div style={{...getCardStyle(), textAlign: 'center', maxWidth: '500px'}}>
                        <h1 style={{
                            fontSize: isMobileView ? '40px' : '56px',
                            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                            WebkitBackgroundClip: 'text',
                            WebkitTextFillColor: 'transparent',
                            marginBottom: '16px',
                            fontWeight: '800',
                            letterSpacing: '-0.02em'
                        }}>FONDAMENTO</h1>
                        
                        <p style={{
                            color: '#666',
                            fontSize: isMobileView ? '17px' : '20px',
                            marginBottom: '40px',
                            lineHeight: '1.6',
                            fontWeight: '500'
                        }}>
                            Le r√©seau professionnel<br/>qui va √† l'essentiel
                        </p>

                        <div style={{ marginBottom: '32px' }}>
                            <p style={{ color: '#333', marginBottom: '20px', fontSize: '15px', fontWeight: '600' }}>
                                Nouveau sur la plateforme ?
                            </p>
                            <button
                                onClick={() => setCurrentPage('signup')}
                                style={getButtonStyle('primary')}
                                onTouchStart={(e) => e.currentTarget.style.transform = 'scale(0.98)'}
                                onTouchEnd={(e) => e.currentTarget.style.transform = 'scale(1)'}
                            >
                                <span style={{fontSize: '20px'}}>‚ú®</span> Cr√©er mon compte
                            </button>
                        </div>

                        <div style={{ marginBottom: '32px' }}>
                            <p style={{ color: '#333', marginBottom: '20px', fontSize: '15px', fontWeight: '600' }}>
                                D√©j√† membre ?
                            </p>
                            <button
                                onClick={() => {
                                    setUser(mockUser);
                                    setCurrentPage('dashboard');
                                }}
                                style={getButtonStyle('outline')}
                            >
                                Se connecter (D√âMO)
                            </button>
                        </div>

                        <div style={{
                            marginTop: '40px',
                            padding: isMobileView ? '20px' : '24px',
                            background: 'linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%)',
                            borderRadius: '16px',
                            border: '1px solid rgba(102, 126, 234, 0.1)'
                        }}>
                            <div style={{ fontSize: '14px', lineHeight: '1.8', color: '#555' }}>
                                <div style={{marginBottom: '8px'}}>üéØ <strong>Matching intelligent</strong> bas√© sur vos besoins</div>
                                <div style={{marginBottom: '8px'}}>üí¨ <strong>√âchanges anonymes</strong> puis r√©v√©lation mutuelle</div>
                                <div>‚≠ê <strong>R√©putation transparente</strong> et v√©rifi√©e</div>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Page: Signup
            const SignupPage = () => (
                <div style={{
                    minHeight: '100vh',
                    padding: isMobileView ? '20px' : '40px'
                }} className="fade-in">
                    <div style={{maxWidth: '600px', margin: '0 auto'}}>
                        <button
                            onClick={() => setCurrentPage('home')}
                            style={{
                                marginBottom: '20px',
                                padding: '12px 24px',
                                background: 'rgba(255, 255, 255, 0.9)',
                                color: '#667eea',
                                border: 'none',
                                borderRadius: '12px',
                                cursor: 'pointer',
                                fontWeight: '600',
                                fontSize: '15px',
                                display: 'inline-flex',
                                alignItems: 'center',
                                gap: '8px'
                            }}
                        >
                            ‚Üê Retour
                        </button>

                        <div style={getCardStyle()}>
                            <h2 style={{
                                fontSize: isMobileView ? '28px' : '36px',
                                background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                WebkitBackgroundClip: 'text',
                                WebkitTextFillColor: 'transparent',
                                marginBottom: '16px',
                                fontWeight: '700'
                            }}>Cr√©er mon compte</h2>

                            <p style={{ 
                                color: '#666', 
                                marginBottom: '32px', 
                                fontSize: isMobileView ? '15px' : '17px',
                                lineHeight: '1.6'
                            }}>
                                L'inscription compl√®te avec toutes les fonctionnalit√©s 
                                (profil d√©taill√©, r√©seau, pr√©f√©rences) sera disponible dans la version finale avec backend.
                            </p>

                            <div style={{
                                padding: '20px',
                                background: '#f0fdf4',
                                borderRadius: '12px',
                                marginBottom: '24px',
                                border: '1px solid #10b981'
                            }}>
                                <p style={{ color: '#065f46', fontSize: '14px', marginBottom: '8px', fontWeight: '600' }}>
                                    ‚úÖ Pour tester la plateforme
                                </p>
                                <p style={{ color: '#047857', fontSize: '13px', lineHeight: '1.6' }}>
                                    Utilisez la connexion d√©mo pour d√©couvrir toutes les fonctionnalit√©s : 
                                    poster un besoin, voir les besoins, swiper, consulter les profils, etc.
                                </p>
                            </div>

                            <button
                                onClick={() => {
                                    setUser(mockUser);
                                    setCurrentPage('dashboard');
                                }}
                                style={getButtonStyle('success')}
                            >
                                Continuer en mode d√©mo
                            </button>
                        </div>
                    </div>
                </div>
            );

            // Page: Dashboard
            const DashboardPage = () => (
                <div style={{
                    minHeight: '100vh',
                    padding: isMobileView ? '16px' : '24px'
                }} className="fade-in">
                    <div style={{ maxWidth: '1200px', margin: '0 auto' }}>
                        {/* Header */}
                        <div style={{
                            background: 'rgba(255, 255, 255, 0.95)',
                            borderRadius: '20px',
                            padding: isMobileView ? '20px' : '28px',
                            marginBottom: '20px',
                            boxShadow: '0 10px 30px rgba(0,0,0,0.1)'
                        }}>
                            <div style={{ 
                                display: 'flex', 
                                justifyContent: 'space-between', 
                                alignItems: 'center', 
                                marginBottom: '20px',
                                flexWrap: 'wrap',
                                gap: '12px'
                            }}>
                                <h1 style={{
                                    fontSize: isMobileView ? '24px' : '32px',
                                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                    WebkitBackgroundClip: 'text',
                                    WebkitTextFillColor: 'transparent',
                                    fontWeight: '800',
                                    letterSpacing: '-0.02em'
                                }}>FONDAMENTO</h1>
                                <button
                                    onClick={() => {
                                        setUser(null);
                                        setCurrentPage('home');
                                    }}
                                    style={{
                                        padding: isMobileView ? '10px 18px' : '12px 24px',
                                        background: 'white',
                                        color: '#667eea',
                                        border: '2px solid #667eea',
                                        borderRadius: '12px',
                                        cursor: 'pointer',
                                        fontWeight: '600',
                                        fontSize: isMobileView ? '14px' : '15px'
                                    }}
                                >
                                    D√©connexion
                                </button>
                            </div>

                            <h2 style={{ 
                                fontSize: isMobileView ? '22px' : '28px', 
                                color: '#333', 
                                marginBottom: '12px',
                                fontWeight: '700'
                            }}>
                                Bonjour {user?.prenom} ! üëã
                            </h2>

                            <div style={{ 
                                display: 'flex', 
                                alignItems: 'center', 
                                gap: '10px', 
                                flexWrap: 'wrap', 
                                marginBottom: '24px' 
                            }}>
                                <span style={{ 
                                    background: '#fef3c7', 
                                    padding: '8px 16px', 
                                    borderRadius: '24px',
                                    fontSize: isMobileView ? '13px' : '14px',
                                    fontWeight: '700',
                                    color: '#92400e',
                                    display: 'inline-flex',
                                    alignItems: 'center',
                                    gap: '4px'
                                }}>
                                    ‚≠ê {user?.stats.noteGlobale}/5
                                </span>
                                <span style={{ color: '#666', fontSize: isMobileView ? '13px' : '14px' }}>
                                    {user?.stats.nbAvis} avis
                                </span>
                                {user?.badges.map(badge => (
                                    <span key={badge} style={{
                                        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                        color: 'white',
                                        padding: '6px 14px',
                                        borderRadius: '20px',
                                        fontSize: isMobileView ? '11px' : '12px',
                                        fontWeight: '600'
                                    }}>
                                        {badge}
                                    </span>
                                ))}
                            </div>

                            <div className="responsive-grid">
                                <button
                                    onClick={() => setCurrentPage('poster-besoin')}
                                    style={getButtonStyle('primary')}
                                >
                                    <span style={{fontSize: '20px'}}>üéØ</span> Poster un besoin
                                </button>
                                <button
                                    onClick={() => setCurrentPage('voir-besoins')}
                                    style={getButtonStyle('success')}
                                >
                                    <span style={{fontSize: '20px'}}>üí™</span> Aider quelqu'un
                                </button>
                            </div>
                        </div>

                        {/* Stats */}
                        <div style={{
                            background: 'rgba(255, 255, 255, 0.95)',
                            borderRadius: '20px',
                            padding: isMobileView ? '20px' : '28px',
                            boxShadow: '0 10px 30px rgba(0,0,0,0.1)'
                        }}>
                            <h3 style={{ 
                                fontSize: isMobileView ? '20px' : '24px', 
                                color: '#333', 
                                marginBottom: '20px', 
                                fontWeight: '700',
                                display: 'flex',
                                alignItems: 'center',
                                gap: '8px'
                            }}>
                                <span>üìä</span> Mon activit√©
                            </h3>
                            
                            <div className="responsive-grid">
                                <div style={{
                                    background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                                    padding: isMobileView ? '24px' : '28px',
                                    borderRadius: '16px',
                                    color: 'white'
                                }}>
                                    <h4 style={{ 
                                        fontSize: '15px', 
                                        marginBottom: '12px', 
                                        opacity: 0.95,
                                        fontWeight: '600'
                                    }}>
                                        Comme aidant
                                    </h4>
                                    <div style={{ 
                                        fontSize: isMobileView ? '36px' : '42px', 
                                        fontWeight: '800', 
                                        marginBottom: '8px',
                                        letterSpacing: '-0.02em'
                                    }}>
                                        {user?.stats.introsReussies}
                                    </div>
                                    <div style={{ fontSize: '14px', opacity: 0.9, marginBottom: '16px' }}>
                                        intros r√©ussies
                                    </div>
                                    <div style={{ fontSize: '13px', opacity: 0.9, lineHeight: '1.8' }}>
                                        ‚è±Ô∏è R√©ponse: {user?.stats.tempsReponse}<br/>
                                        ‚ù§Ô∏è {user?.stats.proBono}% pro bono
                                    </div>
                                </div>

                                <div style={{
                                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                    padding: isMobileView ? '24px' : '28px',
                                    borderRadius: '16px',
                                    color: 'white'
                                }}>
                                    <h4 style={{ 
                                        fontSize: '15px', 
                                        marginBottom: '12px', 
                                        opacity: 0.95,
                                        fontWeight: '600'
                                    }}>
                                        Comme demandeur
                                    </h4>
                                    <div style={{ 
                                        fontSize: isMobileView ? '36px' : '42px', 
                                        fontWeight: '800', 
                                        marginBottom: '8px',
                                        letterSpacing: '-0.02em'
                                    }}>
                                        {user?.stats.echangesReussis}
                                    </div>
                                    <div style={{ fontSize: '14px', opacity: 0.9, marginBottom: '16px' }}>
                                        √©changes r√©ussis
                                    </div>
                                    <div style={{ fontSize: '13px', opacity: 0.9, lineHeight: '1.8' }}>
                                        üìù {user?.stats.besoinsPostes} besoins post√©s<br/>
                                        üí¨ {user?.stats.propositionsRecues} propositions
                                    </div>
                                </div>

                                <div style={{
                                    background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                                    padding: isMobileView ? '24px' : '28px',
                                    borderRadius: '16px',
                                    color: 'white'
                                }}>
                                    <h4 style={{ 
                                        fontSize: '15px', 
                                        marginBottom: '12px', 
                                        opacity: 0.95,
                                        fontWeight: '600'
                                    }}>
                                        R√©seau premium
                                    </h4>
                                    <div style={{ 
                                        fontSize: isMobileView ? '36px' : '42px', 
                                        fontWeight: '800', 
                                        marginBottom: '8px',
                                        letterSpacing: '-0.02em'
                                    }}>
                                        {user?.reseauPremium?.length || 0}
                                    </div>
                                    <div style={{ fontSize: '14px', opacity: 0.9, marginBottom: '16px' }}>
                                        contacts √©tablis
                                    </div>
                                    <div style={{ fontSize: '13px', opacity: 0.9, lineHeight: '1.6' }}>
                                        Ces personnes peuvent √™tre notifi√©es en priorit√©
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Page: Poster un besoin
            const PosterBesoinPage = () => (
                <div style={{
                    minHeight: '100vh',
                    padding: isMobileView ? '16px' : '24px'
                }} className="fade-in">
                    <div style={{ maxWidth: '800px', margin: '0 auto' }}>
                        <button
                            onClick={() => {
                                setCurrentPage('dashboard');
                                setShowPropositions(false);
                                setBesoinText('');
                            }}
                            style={{
                                marginBottom: '20px',
                                padding: '12px 24px',
                                background: 'rgba(255, 255, 255, 0.9)',
                                color: '#667eea',
                                border: 'none',
                                borderRadius: '12px',
                                cursor: 'pointer',
                                fontWeight: '600',
                                fontSize: '15px',
                                display: 'inline-flex',
                                alignItems: 'center',
                                gap: '8px'
                            }}
                        >
                            ‚Üê Retour au dashboard
                        </button>

                        {!showPropositions ? (
                            <div style={getCardStyle()}>
                                <h2 style={{
                                    fontSize: isMobileView ? '26px' : '32px',
                                    color: '#333',
                                    marginBottom: '12px',
                                    fontWeight: '700',
                                    display: 'flex',
                                    alignItems: 'center',
                                    gap: '12px'
                                }}>
                                    <span style={{fontSize: isMobileView ? '32px' : '40px'}}>üéØ</span> 
                                    Poster un besoin
                                </h2>
                                <p style={{ 
                                    color: '#666', 
                                    marginBottom: '28px', 
                                    lineHeight: '1.6',
                                    fontSize: isMobileView ? '15px' : '16px'
                                }}>
                                    D√©crivez clairement votre besoin. L'algorithme trouvera 
                                    les personnes les mieux plac√©es pour vous aider.
                                </p>

                                <textarea
                                    value={besoinText}
                                    onChange={(e) => setBesoinText(e.target.value)}
                                    placeholder="Ex: Je cherche un contact chez Intel pour une opportunit√© B2B dans le domaine de l'IA..."
                                    rows={isMobileView ? "5" : "6"}
                                    style={{
                                        width: '100%',
                                        padding: '16px',
                                        borderRadius: '14px',
                                        border: '2px solid #e5e7eb',
                                        fontSize: '16px',
                                        fontFamily: 'inherit',
                                        resize: 'vertical',
                                        marginBottom: '20px',
                                        minHeight: '120px',
                                        outline: 'none'
                                    }}
                                />

                                <button
                                    onClick={() => setShowPropositions(true)}
                                    disabled={!besoinText.trim()}
                                    style={{
                                        ...getButtonStyle('primary'),
                                        opacity: besoinText.trim() ? 1 : 0.5,
                                        cursor: besoinText.trim() ? 'pointer' : 'not-allowed'
                                    }}
                                >
                                    Publier mon besoin
                                </button>
                            </div>
                        ) : (
                            <div>
                                <div style={{
                                    ...getCardStyle(),
                                    marginBottom: '20px'
                                }}>
                                    <h2 style={{
                                        fontSize: isMobileView ? '24px' : '28px',
                                        color: '#333',
                                        marginBottom: '12px',
                                        fontWeight: '700',
                                        display: 'flex',
                                        alignItems: 'center',
                                        gap: '8px'
                                    }}>
                                        <span style={{fontSize: '28px'}}>‚ú®</span> Propositions re√ßues
                                    </h2>
                                    <p style={{ 
                                        color: '#666', 
                                        marginBottom: '12px',
                                        fontSize: isMobileView ? '14px' : '15px'
                                    }}>
                                        Votre besoin : <strong>{besoinText}</strong>
                                    </p>
                                    <p style={{ 
                                        color: '#10b981', 
                                        fontWeight: '700',
                                        fontSize: isMobileView ? '16px' : '18px'
                                    }}>
                                        {mockPropositions.length} personnes peuvent vous aider !
                                    </p>
                                </div>

                                {mockPropositions.map(prop => (
                                    <div key={prop.id} style={{
                                        ...getCardStyle(),
                                        marginBottom: '20px'
                                    }}>
                                        <div style={{ marginBottom: '16px' }}>
                                            <h3 style={{ 
                                                fontSize: isMobileView ? '20px' : '22px', 
                                                color: '#333', 
                                                marginBottom: '6px', 
                                                fontWeight: '700' 
                                            }}>
                                                {prop.nom}
                                            </h3>
                                            <p style={{ color: '#666', marginBottom: '12px', fontSize: isMobileView ? '14px' : '15px' }}>
                                                {prop.titre}
                                            </p>
                                            <div style={{ 
                                                display: 'flex', 
                                                alignItems: 'center', 
                                                gap: '10px', 
                                                flexWrap: 'wrap' 
                                            }}>
                                                <span style={{ 
                                                    color: '#f59e0b', 
                                                    fontWeight: '700',
                                                    fontSize: isMobileView ? '14px' : '15px'
                                                }}>
                                                    ‚≠ê {prop.note}/5
                                                </span>
                                                <span style={{ color: '#666', fontSize: '14px' }}>
                                                    ‚Ä¢ {prop.nbIntros} intros
                                                </span>
                                                {prop.badges.map(badge => (
                                                    <span key={badge} style={{
                                                        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                                        color: 'white',
                                                        padding: '5px 12px',
                                                        borderRadius: '16px',
                                                        fontSize: '11px',
                                                        fontWeight: '600'
                                                    }}>
                                                        {badge}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>

                                        <p style={{ 
                                            color: '#333', 
                                            marginBottom: '16px', 
                                            lineHeight: '1.6',
                                            fontSize: isMobileView ? '14px' : '15px'
                                        }}>
                                            {prop.bio}
                                        </p>

                                        <div style={{ marginBottom: '16px' }}>
                                            <strong style={{ color: '#333', fontSize: '14px', display: 'block', marginBottom: '10px' }}>
                                                R√©seau :
                                            </strong>
                                            <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                                                {prop.reseau.map(entreprise => (
                                                    <span key={entreprise} style={{
                                                        background: '#f3f4f6',
                                                        padding: '8px 14px',
                                                        borderRadius: '10px',
                                                        fontSize: '13px',
                                                        color: '#374151',
                                                        fontWeight: '500'
                                                    }}>
                                                        {entreprise}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>

                                        <button
                                            onClick={() => {
                                                setSelectedProposition(prop);
                                                setShowProfilModal(true);
                                            }}
                                            style={getButtonStyle('primary')}
                                        >
                                            üëÅÔ∏è Voir le profil complet
                                        </button>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );

            // Page: Voir les besoins (Swipe)
            const VoirBesoinsPage = () => {
                const [swipeDirection, setSwipeDirection] = useState(null);
                const besoin = mockBesoins[currentBesoinIndex];
                const cardRef = useRef(null);

                const handleSwipe = (direction) => {
                    setSwipeDirection(direction);
                    
                    setTimeout(() => {
                        if (direction === 'right') {
                            alert('‚úÖ Proposition envoy√©e ! Le demandeur sera notifi√©.');
                        }
                        
                        if (currentBesoinIndex < mockBesoins.length - 1) {
                            setCurrentBesoinIndex(currentBesoinIndex + 1);
                            setSwipeDirection(null);
                        } else {
                            alert('Vous avez vu tous les besoins disponibles !');
                            setCurrentPage('dashboard');
                            setCurrentBesoinIndex(0);
                        }
                    }, 300);
                };

                return (
                    <div style={{
                        minHeight: '100vh',
                        padding: isMobileView ? '16px' : '24px'
                    }} className="fade-in">
                        <div style={{ maxWidth: '600px', margin: '0 auto' }}>
                            <button
                                onClick={() => {
                                    setCurrentPage('dashboard');
                                    setCurrentBesoinIndex(0);
                                }}
                                style={{
                                    marginBottom: '20px',
                                    padding: '12px 24px',
                                    background: 'rgba(255, 255, 255, 0.9)',
                                    color: '#667eea',
                                    border: 'none',
                                    borderRadius: '12px',
                                    cursor: 'pointer',
                                    fontWeight: '600',
                                    fontSize: '15px',
                                    display: 'inline-flex',
                                    alignItems: 'center',
                                    gap: '8px'
                                }}
                            >
                                ‚Üê Retour au dashboard
                            </button>

                            <div 
                                ref={cardRef}
                                className={swipeDirection === 'left' ? 'swipe-left' : swipeDirection === 'right' ? 'swipe-right' : ''}
                                style={{
                                    ...getCardStyle(),
                                    minHeight: isMobileView ? '500px' : '550px',
                                    display: 'flex',
                                    flexDirection: 'column',
                                    justifyContent: 'space-between'
                                }}
                                onTouchStart={onTouchStart}
                                onTouchMove={onTouchMove}
                                onTouchEnd={() => {
                                    const direction = onTouchEnd();
                                    if (direction) handleSwipe(direction);
                                }}
                            >
                                <div>
                                    <div style={{ textAlign: 'center', marginBottom: '28px' }}>
                                        <div style={{ 
                                            fontSize: isMobileView ? '56px' : '72px', 
                                            marginBottom: '16px' 
                                        }}>
                                            üë§
                                        </div>
                                        <h3 style={{ 
                                            fontSize: isMobileView ? '22px' : '26px', 
                                            color: '#333', 
                                            marginBottom: '12px', 
                                            fontWeight: '700' 
                                        }}>
                                            {besoin.demandeur}
                                        </h3>
                                        <div style={{ 
                                            display: 'flex', 
                                            alignItems: 'center', 
                                            justifyContent: 'center', 
                                            gap: '12px', 
                                            flexWrap: 'wrap' 
                                        }}>
                                            <span style={{
                                                background: '#fef3c7',
                                                padding: '8px 16px',
                                                borderRadius: '24px',
                                                fontSize: '14px',
                                                fontWeight: '700',
                                                color: '#92400e'
                                            }}>
                                                ‚≠ê {besoin.note}/5
                                            </span>
                                            <span style={{
                                                background: '#e0e7ff',
                                                padding: '8px 16px',
                                                borderRadius: '24px',
                                                fontSize: '14px',
                                                fontWeight: '700',
                                                color: '#3730a3'
                                            }}>
                                                {besoin.secteur}
                                            </span>
                                        </div>
                                    </div>

                                    <div style={{
                                        background: 'linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%)',
                                        padding: isMobileView ? '20px' : '24px',
                                        borderRadius: '16px',
                                        marginBottom: '28px',
                                        border: '1px solid rgba(102, 126, 234, 0.1)'
                                    }}>
                                        <h4 style={{ 
                                            color: '#667eea', 
                                            marginBottom: '12px', 
                                            fontWeight: '700',
                                            fontSize: isMobileView ? '14px' : '15px'
                                        }}>
                                            Son besoin :
                                        </h4>
                                        <p style={{ 
                                            color: '#333', 
                                            fontSize: isMobileView ? '15px' : '16px', 
                                            lineHeight: '1.7',
                                            fontWeight: '500'
                                        }}>
                                            {besoin.besoin}
                                        </p>
                                    </div>
                                </div>

                                <div>
                                    <div style={{ 
                                        display: 'flex', 
                                        gap: isMobileView ? '12px' : '20px', 
                                        justifyContent: 'center',
                                        marginBottom: '20px'
                                    }}>
                                        <button
                                            onClick={() => handleSwipe('left')}
                                            style={{
                                                width: isMobileView ? '70px' : '90px',
                                                height: isMobileView ? '70px' : '90px',
                                                background: 'white',
                                                border: '4px solid #ef4444',
                                                borderRadius: '50%',
                                                fontSize: isMobileView ? '28px' : '36px',
                                                cursor: 'pointer',
                                                boxShadow: '0 8px 20px rgba(239, 68, 68, 0.3)',
                                                display: 'flex',
                                                alignItems: 'center',
                                                justifyContent: 'center',
                                                transition: 'all 0.2s'
                                            }}
                                            onMouseOver={e => {
                                                e.target.style.transform = 'scale(1.1)';
                                                e.target.style.background = '#fef2f2';
                                            }}
                                            onMouseOut={e => {
                                                e.target.style.transform = 'scale(1)';
                                                e.target.style.background = 'white';
                                            }}
                                            onTouchStart={e => {
                                                e.currentTarget.style.transform = 'scale(0.95)';
                                                e.currentTarget.style.background = '#fef2f2';
                                            }}
                                            onTouchEnd={e => {
                                                e.currentTarget.style.transform = 'scale(1)';
                                                e.currentTarget.style.background = 'white';
                                            }}
                                        >
                                            ‚úó
                                        </button>

                                        <button
                                            onClick={() => handleSwipe('right')}
                                            style={{
                                                width: isMobileView ? '70px' : '90px',
                                                height: isMobileView ? '70px' : '90px',
                                                background: 'white',
                                                border: '4px solid #10b981',
                                                borderRadius: '50%',
                                                fontSize: isMobileView ? '28px' : '36px',
                                                cursor: 'pointer',
                                                boxShadow: '0 8px 20px rgba(16, 185, 129, 0.3)',
                                                display: 'flex',
                                                alignItems: 'center',
                                                justifyContent: 'center',
                                                transition: 'all 0.2s'
                                            }}
                                            onMouseOver={e => {
                                                e.target.style.transform = 'scale(1.1)';
                                                e.target.style.background = '#f0fdf4';
                                            }}
                                            onMouseOut={e => {
                                                e.target.style.transform = 'scale(1)';
                                                e.target.style.background = 'white';
                                            }}
                                            onTouchStart={e => {
                                                e.currentTarget.style.transform = 'scale(0.95)';
                                                e.currentTarget.style.background = '#f0fdf4';
                                            }}
                                            onTouchEnd={e => {
                                                e.currentTarget.style.transform = 'scale(1)';
                                                e.currentTarget.style.background = 'white';
                                            }}
                                        >
                                            ‚úì
                                        </button>
                                    </div>

                                    <p style={{ 
                                        textAlign: 'center', 
                                        color: '#666', 
                                        fontSize: isMobileView ? '13px' : '14px',
                                        fontWeight: '600'
                                    }}>
                                        {currentBesoinIndex + 1} / {mockBesoins.length}
                                    </p>

                                    {isTouchDevice() && (
                                        <p style={{ 
                                            textAlign: 'center', 
                                            color: '#999', 
                                            fontSize: '12px',
                                            marginTop: '12px',
                                            fontStyle: 'italic'
                                        }}>
                                            Swipez √† gauche ou droite sur la carte
                                        </p>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // Modal: Profil complet
            const ProfilModal = () => {
                if (!showProfilModal || !selectedProposition) return null;

                return (
                    <div 
                        className="modal-backdrop"
                        onClick={(e) => {
                            if (e.target === e.currentTarget) setShowProfilModal(false);
                        }}
                    >
                        <div style={{
                            background: 'white',
                            borderRadius: isMobileView ? '20px' : '28px',
                            maxWidth: isMobileView ? '95%' : '700px',
                            width: '100%',
                            maxHeight: '90vh',
                            overflow: 'auto',
                            padding: isMobileView ? '28px 20px' : '40px',
                            position: 'relative'
                        }}
                        onClick={(e) => e.stopPropagation()}
                        >
                            <button
                                onClick={() => setShowProfilModal(false)}
                                style={{
                                    position: 'absolute',
                                    top: isMobileView ? '16px' : '20px',
                                    right: isMobileView ? '16px' : '20px',
                                    background: '#f3f4f6',
                                    border: 'none',
                                    width: '40px',
                                    height: '40px',
                                    borderRadius: '50%',
                                    fontSize: '20px',
                                    cursor: 'pointer',
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    color: '#666'
                                }}
                            >
                                ‚úï
                            </button>

                            <div style={{ textAlign: 'center', marginBottom: '28px' }}>
                                <div style={{
                                    width: isMobileView ? '90px' : '110px',
                                    height: isMobileView ? '90px' : '110px',
                                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                    borderRadius: '50%',
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    fontSize: isMobileView ? '44px' : '52px',
                                    margin: '0 auto 20px'
                                }}>
                                    üë§
                                </div>
                                <h2 style={{ 
                                    fontSize: isMobileView ? '24px' : '30px', 
                                    color: '#333', 
                                    marginBottom: '8px', 
                                    fontWeight: '700' 
                                }}>
                                    {selectedProposition.nom}
                                </h2>
                                <p style={{ 
                                    color: '#666', 
                                    marginBottom: '16px', 
                                    fontSize: isMobileView ? '15px' : '17px',
                                    fontWeight: '500'
                                }}>
                                    {selectedProposition.titre}
                                </p>
                                <div style={{ 
                                    display: 'flex', 
                                    alignItems: 'center', 
                                    justifyContent: 'center', 
                                    gap: '12px', 
                                    marginBottom: '16px',
                                    flexWrap: 'wrap'
                                }}>
                                    <span style={{ 
                                        color: '#f59e0b', 
                                        fontWeight: '700', 
                                        fontSize: isMobileView ? '17px' : '19px'
                                    }}>
                                        ‚≠ê {selectedProposition.note}/5
                                    </span>
                                    <span style={{ color: '#666' }}>‚Ä¢</span>
                                    <span style={{ color: '#666', fontSize: '15px' }}>
                                        {selectedProposition.nbIntros} intros
                                    </span>
                                </div>
                                <div style={{ 
                                    display: 'flex', 
                                    flexWrap: 'wrap', 
                                    gap: '8px', 
                                    justifyContent: 'center' 
                                }}>
                                    {selectedProposition.badges.map(badge => (
                                        <span key={badge} style={{
                                            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                            color: 'white',
                                            padding: '7px 16px',
                                            borderRadius: '18px',
                                            fontSize: '12px',
                                            fontWeight: '600'
                                        }}>
                                            {badge}
                                        </span>
                                    ))}
                                </div>
                            </div>

                            <div style={{ marginBottom: '24px' }}>
                                <h4 style={{ 
                                    color: '#333', 
                                    marginBottom: '12px', 
                                    fontWeight: '700',
                                    fontSize: isMobileView ? '16px' : '17px'
                                }}>
                                    √Ä propos
                                </h4>
                                <p style={{ 
                                    color: '#666', 
                                    lineHeight: '1.7',
                                    fontSize: isMobileView ? '14px' : '15px'
                                }}>
                                    {selectedProposition.bio}
                                </p>
                            </div>

                            <div style={{ marginBottom: '24px' }}>
                                <h4 style={{ 
                                    color: '#333', 
                                    marginBottom: '12px', 
                                    fontWeight: '700',
                                    fontSize: isMobileView ? '16px' : '17px'
                                }}>
                                    R√©seau d√©clar√©
                                </h4>
                                <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                                    {selectedProposition.reseau.map(entreprise => (
                                        <span key={entreprise} style={{
                                            background: '#f3f4f6',
                                            padding: '10px 16px',
                                            borderRadius: '12px',
                                            fontSize: '14px',
                                            color: '#374151',
                                            fontWeight: '600'
                                        }}>
                                            {entreprise}
                                        </span>
                                    ))}
                                </div>
                            </div>

                            <div style={{ marginBottom: '24px' }}>
                                <h4 style={{ 
                                    color: '#333', 
                                    marginBottom: '16px', 
                                    fontWeight: '700',
                                    fontSize: isMobileView ? '16px' : '17px'
                                }}>
                                    Statistiques
                                </h4>
                                <div style={{ 
                                    display: 'grid', 
                                    gridTemplateColumns: 'repeat(3, 1fr)', 
                                    gap: isMobileView ? '10px' : '16px' 
                                }}>
                                    <div style={{ 
                                        textAlign: 'center', 
                                        padding: isMobileView ? '14px' : '18px', 
                                        background: '#f8f9ff', 
                                        borderRadius: '14px',
                                        border: '1px solid #e0e7ff'
                                    }}>
                                        <div style={{ 
                                            fontSize: isMobileView ? '22px' : '28px', 
                                            fontWeight: '800', 
                                            color: '#667eea',
                                            marginBottom: '4px'
                                        }}>
                                            {selectedProposition.stats.intros}
                                        </div>
                                        <div style={{ fontSize: '11px', color: '#666', fontWeight: '600' }}>
                                            Intros
                                        </div>
                                    </div>
                                    <div style={{ 
                                        textAlign: 'center', 
                                        padding: isMobileView ? '14px' : '18px', 
                                        background: '#f8f9ff', 
                                        borderRadius: '14px',
                                        border: '1px solid #e0e7ff'
                                    }}>
                                        <div style={{ 
                                            fontSize: isMobileView ? '22px' : '28px', 
                                            fontWeight: '800', 
                                            color: '#667eea',
                                            marginBottom: '4px'
                                        }}>
                                            {selectedProposition.stats.tempsReponse}
                                        </div>
                                        <div style={{ fontSize: '11px', color: '#666', fontWeight: '600' }}>
                                            R√©ponse
                                        </div>
                                    </div>
                                    <div style={{ 
                                        textAlign: 'center', 
                                        padding: isMobileView ? '14px' : '18px', 
                                        background: '#f8f9ff', 
                                        borderRadius: '14px',
                                        border: '1px solid #e0e7ff'
                                    }}>
                                        <div style={{ 
                                            fontSize: isMobileView ? '22px' : '28px', 
                                            fontWeight: '800', 
                                            color: '#667eea',
                                            marginBottom: '4px'
                                        }}>
                                            {selectedProposition.stats.proBono}%
                                        </div>
                                        <div style={{ fontSize: '11px', color: '#666', fontWeight: '600' }}>
                                            Pro bono
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {selectedProposition.references.length > 0 && (
                                <div style={{ marginBottom: '28px' }}>
                                    <h4 style={{ 
                                        color: '#333', 
                                        marginBottom: '16px', 
                                        fontWeight: '700',
                                        fontSize: isMobileView ? '16px' : '17px'
                                    }}>
                                        R√©f√©rences ({selectedProposition.references.length})
                                    </h4>
                                    {selectedProposition.references.map((ref, index) => (
                                        <div key={index} style={{
                                            background: '#f8f9ff',
                                            padding: isMobileView ? '16px' : '20px',
                                            borderRadius: '14px',
                                            marginBottom: '12px',
                                            border: '1px solid #e0e7ff'
                                        }}>
                                            <div style={{ 
                                                display: 'flex', 
                                                justifyContent: 'space-between', 
                                                marginBottom: '12px',
                                                alignItems: 'flex-start',
                                                flexWrap: 'wrap',
                                                gap: '8px'
                                            }}>
                                                <div>
                                                    <strong style={{ 
                                                        color: '#333', 
                                                        fontSize: isMobileView ? '14px' : '15px'
                                                    }}>
                                                        {ref.auteur}
                                                    </strong>
                                                    <div style={{ 
                                                        color: '#f59e0b', 
                                                        fontSize: '14px', 
                                                        marginTop: '4px' 
                                                    }}>
                                                        {'‚≠ê'.repeat(ref.note)}
                                                    </div>
                                                </div>
                                                <span style={{ 
                                                    color: '#999', 
                                                    fontSize: '12px',
                                                    fontWeight: '500'
                                                }}>
                                                    {ref.date}
                                                </span>
                                            </div>
                                            <p style={{ 
                                                color: '#555', 
                                                fontSize: isMobileView ? '13px' : '14px', 
                                                lineHeight: '1.6', 
                                                marginBottom: '10px',
                                                fontStyle: 'italic'
                                            }}>
                                                "{ref.texte}"
                                            </p>
                                            <div style={{
                                                background: '#e0e7ff',
                                                padding: '6px 14px',
                                                borderRadius: '10px',
                                                display: 'inline-block',
                                                fontSize: '12px',
                                                color: '#667eea',
                                                fontWeight: '600'
                                            }}>
                                                {ref.contexte}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            <div style={{ 
                                display: 'grid', 
                                gridTemplateColumns: isMobileView ? '1fr' : '1fr 2fr', 
                                gap: '12px' 
                            }}>
                                <button
                                    onClick={() => setShowProfilModal(false)}
                                    style={{
                                        padding: '16px',
                                        background: 'white',
                                        color: '#667eea',
                                        border: '2px solid #667eea',
                                        borderRadius: '14px',
                                        fontSize: '16px',
                                        fontWeight: '600',
                                        cursor: 'pointer',
                                        minHeight: '52px'
                                    }}
                                >
                                    ‚Üê Retour
                                </button>
                                <button
                                    onClick={() => {
                                        setShowProfilModal(false);
                                        setShowChat(true);
                                        setChatMessages([
                                            { 
                                                from: 'system', 
                                                text: 'Vous √™tes maintenant en contact avec ' + selectedProposition.nom + ' (anonyme pour l\'instant)' 
                                            }
                                        ]);
                                    }}
                                    style={{
                                        padding: '16px',
                                        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                        color: 'white',
                                        border: 'none',
                                        borderRadius: '14px',
                                        fontSize: '16px',
                                        fontWeight: '600',
                                        cursor: 'pointer',
                                        minHeight: '52px',
                                        display: 'flex',
                                        alignItems: 'center',
                                        justifyContent: 'center',
                                        gap: '8px'
                                    }}
                                >
                                    üí¨ Discuter
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // Modal: Chat
            const ChatModal = () => {
                const messagesEndRef = useRef(null);

                useEffect(() => {
                    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
                }, [chatMessages]);

                if (!showChat) return null;

                const sendMessage = () => {
                    if (!newMessage.trim()) return;
                    
                    setChatMessages([...chatMessages, { from: 'me', text: newMessage }]);
                    setNewMessage('');

                    // Simulation de r√©ponse
                    setTimeout(() => {
                        setChatMessages(prev => [...prev, {
                            from: 'other',
                            text: "Je peux certainement vous aider ! J'ai un excellent contact chez Intel. Dites-moi plus sur votre projet."
                        }]);
                    }, 1000);
                };

                const revealIdentity = () => {
                    setChatMessages(prev => [...prev, {
                        from: 'system',
                        text: 'Vous avez r√©v√©l√© votre identit√©. En attente de la r√©v√©lation de l\'autre personne...'
                    }]);

                    setTimeout(() => {
                        setIdentityRevealed(true);
                        setChatMessages(prev => [...prev, {
                            from: 'system',
                            text: '‚ú® Identit√©s r√©v√©l√©es ! Vous pouvez maintenant √©changer vos coordonn√©es.'
                        }, {
                            from: 'other',
                            text: 'Ravi de faire votre connaissance ! Voici mes coordonn√©es : ' + selectedProposition.nom + ' - marc.d@email.com'
                        }]);
                    }, 2000);
                };

                return (
                    <div 
                        className="modal-backdrop"
                        onClick={(e) => {
                            if (e.target === e.currentTarget) {
                                setShowChat(false);
                                setChatMessages([]);
                                setIdentityRevealed(false);
                                setNewMessage('');
                            }
                        }}
                    >
                        <div style={{
                            background: 'white',
                            borderRadius: isMobileView ? '20px' : '28px',
                            maxWidth: isMobileView ? '95%' : '600px',
                            width: '100%',
                            height: isMobileView ? '85vh' : '80vh',
                            display: 'flex',
                            flexDirection: 'column',
                            overflow: 'hidden'
                        }}
                        onClick={(e) => e.stopPropagation()}
                        >
                            {/* Header */}
                            <div style={{
                                padding: isMobileView ? '18px 20px' : '22px 28px',
                                borderBottom: '1px solid #e5e7eb',
                                display: 'flex',
                                justifyContent: 'space-between',
                                alignItems: 'center',
                                background: 'linear-gradient(135deg, #f8f9ff 0%, white 100%)'
                            }}>
                                <div>
                                    <h3 style={{ 
                                        color: '#333', 
                                        fontSize: isMobileView ? '17px' : '19px', 
                                        fontWeight: '700',
                                        marginBottom: '4px'
                                    }}>
                                        {identityRevealed ? selectedProposition.nom : 'Professionnel Tech'}
                                    </h3>
                                    <p style={{ 
                                        color: identityRevealed ? '#10b981' : '#667eea', 
                                        fontSize: '13px',
                                        fontWeight: '600'
                                    }}>
                                        {identityRevealed ? '‚ú® Identit√© r√©v√©l√©e' : 'üîí Discussion anonyme'}
                                    </p>
                                </div>
                                <button
                                    onClick={() => {
                                        setShowChat(false);
                                        setChatMessages([]);
                                        setIdentityRevealed(false);
                                        setNewMessage('');
                                    }}
                                    style={{
                                        background: '#f3f4f6',
                                        border: 'none',
                                        width: '36px',
                                        height: '36px',
                                        borderRadius: '50%',
                                        fontSize: '18px',
                                        cursor: 'pointer',
                                        display: 'flex',
                                        alignItems: 'center',
                                        justifyContent: 'center',
                                        color: '#666'
                                    }}
                                >
                                    ‚úï
                                </button>
                            </div>

                            {/* Messages */}
                            <div style={{
                                flex: 1,
                                padding: isMobileView ? '16px' : '20px',
                                overflowY: 'auto',
                                display: 'flex',
                                flexDirection: 'column',
                                gap: '14px',
                                background: '#fafafa'
                            }}>
                                {chatMessages.map((msg, index) => (
                                    <div key={index} style={{
                                        alignSelf: msg.from === 'me' ? 'flex-end' : msg.from === 'system' ? 'center' : 'flex-start',
                                        maxWidth: msg.from === 'system' ? '90%' : '75%'
                                    }}>
                                        {msg.from === 'system' ? (
                                            <div style={{
                                                background: 'rgba(102, 126, 234, 0.1)',
                                                padding: '12px 18px',
                                                borderRadius: '14px',
                                                fontSize: '13px',
                                                color: '#667eea',
                                                textAlign: 'center',
                                                lineHeight: '1.5',
                                                fontWeight: '500',
                                                border: '1px solid rgba(102, 126, 234, 0.2)'
                                            }}>
                                                {msg.text}
                                            </div>
                                        ) : (
                                            <div style={{
                                                background: msg.from === 'me' 
                                                    ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' 
                                                    : 'white',
                                                color: msg.from === 'me' ? 'white' : '#333',
                                                padding: '14px 18px',
                                                borderRadius: msg.from === 'me' ? '20px 20px 4px 20px' : '20px 20px 20px 4px',
                                                fontSize: '15px',
                                                lineHeight: '1.5',
                                                boxShadow: msg.from === 'me' 
                                                    ? '0 4px 12px rgba(102, 126, 234, 0.3)' 
                                                    : '0 2px 8px rgba(0,0,0,0.1)',
                                                fontWeight: '500'
                                            }}>
                                                {msg.text}
                                            </div>
                                        )}
                                    </div>
                                ))}
                                <div ref={messagesEndRef} />
                            </div>

                            {/* Input */}
                            <div style={{
                                padding: isMobileView ? '16px' : '20px',
                                borderTop: '1px solid #e5e7eb',
                                background: 'white'
                            }}>
                                {!identityRevealed ? (
                                    <>
                                        <div style={{ display: 'flex', gap: '10px', marginBottom: '12px' }}>
                                            <input
                                                type="text"
                                                value={newMessage}
                                                onChange={(e) => setNewMessage(e.target.value)}
                                                onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
                                                placeholder="Votre message..."
                                                style={{
                                                    flex: 1,
                                                    padding: '14px 18px',
                                                    borderRadius: '14px',
                                                    border: '2px solid #e5e7eb',
                                                    fontSize: '15px',
                                                    outline: 'none',
                                                    fontFamily: 'inherit'
                                                }}
                                            />
                                            <button
                                                onClick={sendMessage}
                                                style={{
                                                    padding: '14px 24px',
                                                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                                    color: 'white',
                                                    border: 'none',
                                                    borderRadius: '14px',
                                                    cursor: 'pointer',
                                                    fontWeight: '600',
                                                    fontSize: '15px',
                                                    minWidth: '80px'
                                                }}
                                            >
                                                Envoyer
                                            </button>
                                        </div>
                                        <button
                                            onClick={revealIdentity}
                                            style={{
                                                width: '100%',
                                                padding: '14px',
                                                background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                                                color: 'white',
                                                border: 'none',
                                                borderRadius: '14px',
                                                cursor: 'pointer',
                                                fontWeight: '600',
                                                fontSize: '15px',
                                                display: 'flex',
                                                alignItems: 'center',
                                                justifyContent: 'center',
                                                gap: '8px'
                                            }}
                                        >
                                            ‚ú® R√©v√©ler mon identit√©
                                        </button>
                                    </>
                                ) : (
                                    <button
                                        onClick={() => setShowRatingModal(true)}
                                        style={{
                                            width: '100%',
                                            padding: '16px',
                                            background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                                            color: 'white',
                                            border: 'none',
                                            borderRadius: '14px',
                                            cursor: 'pointer',
                                            fontWeight: '600',
                                            fontSize: '16px',
                                            display: 'flex',
                                            alignItems: 'center',
                                            justifyContent: 'center',
                                            gap: '8px'
                                        }}
                                    >
                                        ‚≠ê Terminer et noter l'√©change
                                    </button>
                                )}
                            </div>
                        </div>
                    </div>
                );
            };

            // Modal: Notation
            const RatingModal = () => {
                if (!showRatingModal) return null;

                const submitRating = () => {
                    if (rating === 0) {
                        alert('Veuillez s√©lectionner une note');
                        return;
                    }

                    alert(`Merci ! Votre avis a √©t√© enregistr√©.\n${selectedProposition.nom} recevra une note de ${rating}/5 √©toiles.`);
                    setShowRatingModal(false);
                    setShowChat(false);
                    setRating(0);
                    setRatingComment('');
                    setCurrentPage('dashboard');
                };

                return (
                    <div 
                        className="modal-backdrop"
                        onClick={(e) => {
                            if (e.target === e.currentTarget) setShowRatingModal(false);
                        }}
                    >
                        <div style={{
                            background: 'white',
                            borderRadius: isMobileView ? '20px' : '28px',
                            maxWidth: isMobileView ? '95%' : '500px',
                            width: '100%',
                            padding: isMobileView ? '32px 20px' : '40px',
                            maxHeight: '90vh',
                            overflow: 'auto'
                        }}
                        onClick={(e) => e.stopPropagation()}
                        >
                            <h2 style={{ 
                                fontSize: isMobileView ? '22px' : '26px', 
                                color: '#333', 
                                marginBottom: '24px', 
                                fontWeight: '700', 
                                textAlign: 'center' 
                            }}>
                                Notez votre √©change
                            </h2>

                            <div style={{ textAlign: 'center', marginBottom: '28px' }}>
                                <div style={{
                                    width: '80px',
                                    height: '80px',
                                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                    borderRadius: '50%',
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    fontSize: '36px',
                                    margin: '0 auto 16px'
                                }}>
                                    üë§
                                </div>
                                <h3 style={{ color: '#333', fontSize: '19px', fontWeight: '700', marginBottom: '4px' }}>
                                    {selectedProposition?.nom}
                                </h3>
                                <p style={{ color: '#666', fontSize: '14px' }}>
                                    {selectedProposition?.titre}
                                </p>
                            </div>

                            <div style={{ marginBottom: '24px' }}>
                                <label style={{ 
                                    display: 'block', 
                                    marginBottom: '16px', 
                                    color: '#333', 
                                    fontWeight: '700', 
                                    textAlign: 'center',
                                    fontSize: '15px'
                                }}>
                                    Votre note *
                                </label>
                                <div style={{ display: 'flex', justifyContent: 'center', gap: '12px' }}>
                                    {[1, 2, 3, 4, 5].map(star => (
                                        <button
                                            key={star}
                                            onClick={() => setRating(star)}
                                            style={{
                                                background: 'none',
                                                border: 'none',
                                                fontSize: isMobileView ? '36px' : '44px',
                                                cursor: 'pointer',
                                                color: star <= rating ? '#f59e0b' : '#e5e7eb',
                                                transition: 'all 0.2s',
                                                padding: '4px'
                                            }}
                                        >
                                            ‚≠ê
                                        </button>
                                    ))}
                                </div>
                            </div>

                            <div style={{ marginBottom: '24px' }}>
                                <label style={{ 
                                    display: 'block', 
                                    marginBottom: '10px', 
                                    color: '#333', 
                                    fontWeight: '600',
                                    fontSize: '15px'
                                }}>
                                    Votre avis (optionnel)
                                </label>
                                <textarea
                                    value={ratingComment}
                                    onChange={(e) => setRatingComment(e.target.value)}
                                    placeholder="Ex: Marc a tenu parole, super contact chez Intel ! Intro rapide et efficace."
                                    rows="4"
                                    style={{
                                        width: '100%',
                                        padding: '14px',
                                        borderRadius: '14px',
                                        border: '2px solid #e5e7eb',
                                        fontSize: '15px',
                                        fontFamily: 'inherit',
                                        resize: 'vertical',
                                        outline: 'none'
                                    }}
                                />
                            </div>

                            <div style={{ 
                                display: 'grid', 
                                gridTemplateColumns: isMobileView ? '1fr' : '1fr 2fr', 
                                gap: '12px' 
                            }}>
                                <button
                                    onClick={() => setShowRatingModal(false)}
                                    style={{
                                        padding: '16px',
                                        background: 'white',
                                        color: '#667eea',
                                        border: '2px solid #667eea',
                                        borderRadius: '14px',
                                        fontSize: '15px',
                                        fontWeight: '600',
                                        cursor: 'pointer',
                                        minHeight: '52px'
                                    }}
                                >
                                    Passer
                                </button>
                                <button
                                    onClick={submitRating}
                                    disabled={rating === 0}
                                    style={{
                                        padding: '16px',
                                        background: rating === 0 ? '#d1d5db' : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                                        color: 'white',
                                        border: 'none',
                                        borderRadius: '14px',
                                        fontSize: '15px',
                                        fontWeight: '600',
                                        cursor: rating === 0 ? 'not-allowed' : 'pointer',
                                        minHeight: '52px'
                                    }}
                                >
                                    Valider mon avis
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            // Main render
            return (
                <>
                    {currentPage === 'home' && <HomePage />}
                    {currentPage === 'signup' && <SignupPage />}
                    {currentPage === 'dashboard' && <DashboardPage />}
                    {currentPage === 'poster-besoin' && <PosterBesoinPage />}
                    {currentPage === 'voir-besoins' && <VoirBesoinsPage />}
                    <ProfilModal />
                    <ChatModal />
                    <RatingModal />
                </>
            );
        }

        // Render app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FondamentoApp />);
    </script>
</body>
</html>
